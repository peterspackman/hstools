#!/usr/bin/python
import re
import sys
import numpy as np
import cv2
import matplotlib as mpl
from matplotlib import pyplot as plt
import scipy.stats as stats
import hist  as h


# Calculate the Spearman rank-order correlation coefficient from 2 histograms
def spearman_roc(hist1, hist2):
  x = hist1.flatten()
  y = hist2.flatten()
  return stats.spearmanr(x,y)

def kendall_tau(hist1, hist2):
  x = hist1.flatten()
  y = hist2.flatten()

  return stats.kendalltau(x,y)
  

def main():
  
  x1,y1 = h.readcxsfile('vals1.txt')
  x2,y2 = h.readcxsfile('vals2.txt')
  x3,y3 = h.readcxsfile('vals3.txt')

  hist1,xedges,yedges = h.bin_data(x1,y1,200)
  hist2,xedges,yedges = h.bin_data(x2,y2,200)
  hist3,xedges,yedges = h.bin_data(x3,y3,200)

  r, p = spearman_hist(hist1,hist2)
  print "(1,2) Correlation coefficient :{0}, p = {1}".format(r,p)

  r, p = spearman_hist(hist1,hist3)
  print "(1,3) Correlation coefficient :{0}, p = {1}".format(r,p)
  
  r, p = spearman_hist(hist2,hist3)

  print "(2,3) Correlation coefficient :{0}, p = {1}".format(r,p)
if __name__ == '__main__':
  main() 


